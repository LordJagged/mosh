<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>Socket - Mosh</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script><script language=JavaScript src="../../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.4 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Socket"></a>Socket</h1><div class=CBody><p>Mosh provides a simple Socket library.</p><p>This library is almost compatible with Ypsilon&rsquo;s (socket) library.&nbsp; Thanks to Yoshikatsu Fujita.</p><h4 class=CHeading>Example</h4><blockquote><pre>;; Sample of IRC client bot
(import (rnrs)
        (mosh)
        (mosh socket))

(define (irc-bot server port nick channel)
  (let ([socket (make-client-socket server port)])
    (define (send text)
      (assert (&lt;= (string-length text) 510))
      (socket-send socket (string-&gt;utf8 (string-append text &quot;\r\n&quot;))))
    (define (recv)
      (utf8-&gt;string (socket-recv socket 512)))
    (define (say text)
      (send (format &quot;PRIVMSG ~a :~a&quot; channel text)))
    (send (format &quot;NICK ~a&quot; nick))
    (send (format &quot;USER ~a 0 * :~a&quot; nick nick))
    (send (format &quot;JOIN ~a&quot; channel))
    (let loop ([data (recv)])
      (cond
       [(#/:([^!]+).*PRIVMSG[^:]+:(.*)/ data) =&gt;
        (lambda (m)
          (format #t &quot;&lt;~a&gt; ~a\n&quot; (m 1) (m 2))
          (say (format &quot;what is ~s?&quot; (m 2))))]
       [(#/^PING/ data)
        (send &quot;PONG 0&quot;)]
       [(#/:.*433.*Nickname is already in use.*/ data)
        (error 'irc &quot;Nickname is already in use&quot;)])
      (loop (recv)))
    (socket-close socket)))

(irc-bot &quot;irc.freenode.net&quot; &quot;6666&quot; &quot;higepon&quot; &quot;#mosh&quot;)</pre></blockquote><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Socket" >Socket</a></td><td class=SDescription>Mosh provides a simple Socket library.</td></tr><tr class="SLibrary"><td class=SEntry><a href="#(mosh_socket)" >(mosh socket)</a></td><td class=SDescription>Socket Library</td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#(mosh_socket).Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).socket" >socket?</a></td><td class=SDescription>Returns #t when obj is socket.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#(mosh_socket).make-client-socket" >make-client-socket</a></td><td class=SDescription>Returns a client socket connected to an Internet address.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).make-server-socket" >make-server-socket</a></td><td class=SDescription>Returns a server socket waiting for connections.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#(mosh_socket).socket-recv" >socket-recv</a></td><td class=SDescription>Receives a binary data block from a socket.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).socket-recv!" >socket-recv!</a></td><td class=SDescription>Receives a binary data block from a socket.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#(mosh_socket).socket-send" >socket-send</a></td><td class=SDescription>Sends a binary data block to a socket.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).socket-close" >socket-close</a></td><td class=SDescription>Closes a socket.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#(mosh_socket).socket-shutdown" >socket-shutdown</a></td><td class=SDescription>Shutdowns a socket.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).socket-accept" >socket-accept</a></td><td class=SDescription>Wait for an incoming connection request, and returns a fresh connected client socket.</td></tr><tr class="SFunction SIndent2"><td class=SEntry><a href="#(mosh_socket).socket-port" >socket-port</a></td><td class=SDescription>Returns a fresh binary input/output port associated with a socket.</td></tr><tr class="SFunction SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).call-with-socket" >call-with-socket</a></td><td class=SDescription>Calls a procedure with a socket as an argument. </td></tr><tr class="SGroup SIndent1"><td class=SEntry><a href="#(mosh_socket).Constants" >Constants</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).AF_INET" >AF_INET</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).AF_INET6" >AF_INET6</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).AF_UNSPEC" >AF_UNSPEC</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).SOCK_STREAM" >SOCK_STREAM</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).SOCK_DGRAM" >SOCK_DGRAM</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).AI_ADDRCONFIG" >AI_ADDRCONFIG</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).AI_ALL" >AI_ALL</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).AI_CANONNAME" >AI_CANONNAME</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).AI_NUMERICHOST" >AI_NUMERICHOST</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).AI_NUMERICSERV" >AI_NUMERICSERV</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).AI_PASSIVE" >AI_PASSIVE</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).AI_V4MAPPED" >AI_V4MAPPED</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).IPPROTO_TCP" >IPPROTO_TCP</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).IPPROTO_UDP" >IPPROTO_UDP</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).IPPROTO_RAW" >IPPROTO_RAW</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).SHUT_RD" >SHUT_RD</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2 SMarked"><td class=SEntry><a href="#(mosh_socket).SHUT_WR" >SHUT_WR</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent2"><td class=SEntry><a href="#(mosh_socket).SHUT_RDWR" >SHUT_RDWR</a></td><td class=SDescription></td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CLibrary"><div class=CTopic><h2 class=CTitle><a name="(mosh_socket)"></a>(mosh socket)</h2><div class=CBody><p>Socket Library</p><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SGroup"><td class=SEntry><a href="#(mosh_socket).Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).socket" >socket?</a></td><td class=SDescription>Returns #t when obj is socket.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#(mosh_socket).make-client-socket" >make-client-socket</a></td><td class=SDescription>Returns a client socket connected to an Internet address.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).make-server-socket" >make-server-socket</a></td><td class=SDescription>Returns a server socket waiting for connections.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#(mosh_socket).socket-recv" >socket-recv</a></td><td class=SDescription>Receives a binary data block from a socket.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).socket-recv!" >socket-recv!</a></td><td class=SDescription>Receives a binary data block from a socket.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#(mosh_socket).socket-send" >socket-send</a></td><td class=SDescription>Sends a binary data block to a socket.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).socket-close" >socket-close</a></td><td class=SDescription>Closes a socket.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#(mosh_socket).socket-shutdown" >socket-shutdown</a></td><td class=SDescription>Shutdowns a socket.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).socket-accept" >socket-accept</a></td><td class=SDescription>Wait for an incoming connection request, and returns a fresh connected client socket.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#(mosh_socket).socket-port" >socket-port</a></td><td class=SDescription>Returns a fresh binary input/output port associated with a socket.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).call-with-socket" >call-with-socket</a></td><td class=SDescription>Calls a procedure with a socket as an argument. </td></tr><tr class="SGroup"><td class=SEntry><a href="#(mosh_socket).Constants" >Constants</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).AF_INET" >AF_INET</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).AF_INET6" >AF_INET6</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).AF_UNSPEC" >AF_UNSPEC</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).SOCK_STREAM" >SOCK_STREAM</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).SOCK_DGRAM" >SOCK_DGRAM</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).AI_ADDRCONFIG" >AI_ADDRCONFIG</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).AI_ALL" >AI_ALL</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).AI_CANONNAME" >AI_CANONNAME</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).AI_NUMERICHOST" >AI_NUMERICHOST</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).AI_NUMERICSERV" >AI_NUMERICSERV</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).AI_PASSIVE" >AI_PASSIVE</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).AI_V4MAPPED" >AI_V4MAPPED</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).IPPROTO_TCP" >IPPROTO_TCP</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).IPPROTO_UDP" >IPPROTO_UDP</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).IPPROTO_RAW" >IPPROTO_RAW</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).SHUT_RD" >SHUT_RD</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1 SMarked"><td class=SEntry><a href="#(mosh_socket).SHUT_WR" >SHUT_WR</a></td><td class=SDescription></td></tr><tr class="SConstant SIndent1"><td class=SEntry><a href="#(mosh_socket).SHUT_RDWR" >SHUT_RDWR</a></td><td class=SDescription></td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket"></a>socket?</h3><div class=CBody><p>Returns #t when obj is socket.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(socket? obj)</pre></blockquote><h4 class=CHeading>Returns</h4><p>#t when obj is socket.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).make-client-socket"></a>make-client-socket</h3><div class=CBody><p>Returns a client socket connected to an Internet address.</p><p>The Internet address is identified by node and service. make-client-socket uses getaddrinfo(3) to look up it.</p><p>The arguments node, service, ai-family, ai-socktype, ai-flags, and ai-protocol will be passed to getaddrinfo(3) as a correspondent parameter.Refer to getaddrinfo(3) manual page for details</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(make-client-socket node service . options)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>node</td><td class=CDLDescription>a network address.&nbsp; (examples: &ldquo;www.w3.org&rdquo;, &ldquo;localhost&rdquo;, &ldquo;128.30.52.45&rdquo;)</td></tr><tr><td class=CDLEntry>service</td><td class=CDLDescription>a network service.&nbsp; (examples: &ldquo;http&rdquo;, &ldquo;ssh&rdquo;, &ldquo;80&rdquo;, &ldquo;22&rdquo;)</td></tr><tr><td class=CDLEntry>ai-family(optional)</td><td class=CDLDescription>an address family specifier.&nbsp; <a href="#(mosh_socket).AF_INET" class=LConstant >AF_INET</a> (default), <a href="#(mosh_socket).AF_INET6" class=LConstant >AF_INET6</a> or <a href="#(mosh_socket).AF_UNSPEC" class=LConstant >AF_UNSPEC</a>.</td></tr><tr><td class=CDLEntry>ai-socktype(optional)</td><td class=CDLDescription>a socket type specifier.&nbsp; <a href="#(mosh_socket).SOCK_STREAM" class=LConstant >SOCK_STREAM</a> (default) or <a href="#(mosh_socket).SOCK_DGRAM" class=LConstant >SOCK_DGRAM</a>.</td></tr><tr><td class=CDLEntry>ai-flags</td><td class=CDLDescription>an additional options specifier.&nbsp; <a href="#(mosh_socket).AI_ADDRCONFIG" class=LConstant >AI_ADDRCONFIG</a>, <a href="#(mosh_socket).AI_ALL" class=LConstant >AI_ALL</a>, <a href="#(mosh_socket).AI_CANONNAME" class=LConstant >AI_CANONNAME</a>, <a href="#(mosh_socket).AI_NUMERICHOST" class=LConstant >AI_NUMERICHOST</a>, <a href="#(mosh_socket).AI_NUMERICSERV" class=LConstant >AI_NUMERICSERV</a>, <a href="#(mosh_socket).AI_PASSIVE" class=LConstant >AI_PASSIVE</a>, <a href="#(mosh_socket).AI_V4MAPPED" class=LConstant >AI_V4MAPPED</a> or 0(default).</td></tr><tr><td class=CDLEntry>ai-protocol</td><td class=CDLDescription>a protocol specifier.&nbsp; <a href="#(mosh_socket).IPPROTO_TCP" class=LConstant >IPPROTO_TCP</a>, <a href="#(mosh_socket).IPPROTO_UDP" class=LConstant >IPPROTO_UDP</a>, <a href="#(mosh_socket).IPPROTO_RAW" class=LConstant >IPPROTO_RAW</a> or 0(default).</td></tr></table><h4 class=CHeading>Returns</h4><p>client socket.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).make-server-socket"></a>make-server-socket</h3><div class=CBody><p>Returns a server socket waiting for connections.</p><p>The arguments service, ai-family, ai-socktype, and ai-protocol will be passed to getaddrinfo(3) as a correspondent parameter to setup server socket.</p><p>Refer to getaddrinfo(3) manual page for details</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(make-server-socket service . options)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>service</td><td class=CDLDescription>a network service.&nbsp; (examples: &ldquo;http&rdquo;, &ldquo;ssh&rdquo;, &ldquo;80&rdquo;, &ldquo;22&rdquo;)</td></tr><tr><td class=CDLEntry>ai-family(optional)</td><td class=CDLDescription>an address family specifier.&nbsp; <a href="#(mosh_socket).AF_INET" class=LConstant >AF_INET</a> (default), <a href="#(mosh_socket).AF_INET6" class=LConstant >AF_INET6</a> or <a href="#(mosh_socket).AF_UNSPEC" class=LConstant >AF_UNSPEC</a>.</td></tr><tr><td class=CDLEntry>ai-socktype(optional)</td><td class=CDLDescription>a socket type specifier.&nbsp; <a href="#(mosh_socket).SOCK_STREAM" class=LConstant >SOCK_STREAM</a> (default) or <a href="#(mosh_socket).SOCK_DGRAM" class=LConstant >SOCK_DGRAM</a>.</td></tr><tr><td class=CDLEntry>ai-protocol(optional)</td><td class=CDLDescription>a protocol specifier.&nbsp; <a href="#(mosh_socket).IPPROTO_TCP" class=LConstant >IPPROTO_TCP</a>, <a href="#(mosh_socket).IPPROTO_UDP" class=LConstant >IPPROTO_UDP</a>, <a href="#(mosh_socket).IPPROTO_RAW" class=LConstant >IPPROTO_RAW</a> or 0(default).</td></tr></table><h4 class=CHeading>Returns</h4><p>server socket.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket-recv"></a>socket-recv</h3><div class=CBody><p>Receives a binary data block from a socket.</p><p>Socket-recv uses recv(2) to receive data.</p><p>The arguments flags will be passed to recv(2) as a correspondent parameter.</p><p>Refer to recv(2) manual page for details.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(socket-recv socket size . flags)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>socket</td><td class=CDLDescription>socket.</td></tr><tr><td class=CDLEntry>size</td><td class=CDLDescription>size to receive.</td></tr><tr><td class=CDLEntry>flags(optional)</td><td class=CDLDescription>flags to recv(2).&nbsp; Default values is 0.</td></tr></table><h4 class=CHeading>Returns</h4><p>binary data as bytevector</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket-recv!"></a>socket-recv!</h3><div class=CBody><p>Receives a binary data block from a socket.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(socket-recv! socket bytevector start size flags)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>socket</td><td class=CDLDescription>socket.</td></tr><tr><td class=CDLEntry>bytevector</td><td class=CDLDescription>buffer to store received data.</td></tr><tr><td class=CDLEntry>start</td><td class=CDLDescription>index of buffer to written.</td></tr><tr><td class=CDLEntry>size</td><td class=CDLDescription>size to receive.</td></tr><tr><td class=CDLEntry>flags</td><td class=CDLDescription>flags to recv(2).</td></tr></table><h4 class=CHeading>Returns</h4><p>data size</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket-send"></a>socket-send</h3><div class=CBody><p>Sends a binary data block to a socket.</p><p>socket-send uses send(2) to send data.</p><p>The arguments flags will be passed to send(2) as a correspondent parameter.</p><p>Refer to send(2) manual page for details.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(socket-send socket bytevector . flags)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>socket</td><td class=CDLDescription>socket.</td></tr><tr><td class=CDLEntry>bytevector</td><td class=CDLDescription>data to send.</td></tr><tr><td class=CDLEntry>flags(optional)</td><td class=CDLDescription>flags to send(2).&nbsp; Default values is 0.</td></tr></table><h4 class=CHeading>Returns</h4><p>sent data size.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket-close"></a>socket-close</h3><div class=CBody><p>Closes a socket.</p><p>On Windows, shutdown is called internally.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(socket-close socket)</pre></blockquote></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket-shutdown"></a>socket-shutdown</h3><div class=CBody><p>Shutdowns a socket.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(socket-shutdown socket how)</pre></blockquote><h4 class=CHeading>Parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>socket</td><td class=CDLDescription>socket.</td></tr><tr><td class=CDLEntry>how</td><td class=CDLDescription><a href="#(mosh_socket).SHUT_RD" class=LConstant >SHUT_RD</a>, <a href="#(mosh_socket).SHUT_WR" class=LConstant >SHUT_WR</a>, or <a href="#(mosh_socket).SHUT_RDWR" class=LConstant >SHUT_RDWR</a>.</td></tr></table></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket-accept"></a>socket-accept</h3><div class=CBody><p>Wait for an incoming connection request, and returns a fresh connected client socket.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(accept socket)</pre></blockquote><h4 class=CHeading>Returns</h4><p>client socket.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).socket-port"></a>socket-port</h3><div class=CBody><p>Returns a fresh binary input/output port associated with a socket.</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(socket-port socket)</pre></blockquote><h4 class=CHeading>Returns</h4><p>binary input/output port.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).call-with-socket"></a>call-with-socket</h3><div class=CBody><p>Calls a procedure with a socket as an argument.&nbsp; This procedure has an analogy to call-with-port of (rnrs io ports).</p><h4 class=CHeading>Prototype</h4><blockquote><pre>(call-with-socket socket proc)</pre></blockquote><h4 class=CHeading>Returns</h4><p>Returned value(s) of proc.</p></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).Constants"></a>Constants</h3></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AF_INET"></a>AF_INET</h3><div class=CBody><h4 class=CHeading>ai-family</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AF_INET6"></a>AF_INET6</h3><div class=CBody><h4 class=CHeading>ai-family</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AF_UNSPEC"></a>AF_UNSPEC</h3><div class=CBody><h4 class=CHeading>ai-family</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).SOCK_STREAM"></a>SOCK_STREAM</h3><div class=CBody><h4 class=CHeading>ai-socktype</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).SOCK_DGRAM"></a>SOCK_DGRAM</h3><div class=CBody><h4 class=CHeading>ai-socktype</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AI_ADDRCONFIG"></a>AI_ADDRCONFIG</h3><div class=CBody><h4 class=CHeading>ai-flags</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AI_ALL"></a>AI_ALL</h3><div class=CBody><h4 class=CHeading>ai-flags</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AI_CANONNAME"></a>AI_CANONNAME</h3><div class=CBody><h4 class=CHeading>ai-flags</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AI_NUMERICHOST"></a>AI_NUMERICHOST</h3><div class=CBody><h4 class=CHeading>ai-flags</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AI_NUMERICSERV"></a>AI_NUMERICSERV</h3><div class=CBody><h4 class=CHeading>ai-flags</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AI_PASSIVE"></a>AI_PASSIVE</h3><div class=CBody><h4 class=CHeading>ai-flags</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).AI_V4MAPPED"></a>AI_V4MAPPED</h3><div class=CBody><h4 class=CHeading>ai-flags</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).IPPROTO_TCP"></a>IPPROTO_TCP</h3><div class=CBody><h4 class=CHeading>ai-protocol</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).IPPROTO_UDP"></a>IPPROTO_UDP</h3><div class=CBody><h4 class=CHeading>ai-protocol</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).IPPROTO_RAW"></a>IPPROTO_RAW</h3><div class=CBody><h4 class=CHeading>ai-protocol</h4></div></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).SHUT_RD"></a>SHUT_RD</h3></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).SHUT_WR"></a>SHUT_WR</h3></div></div>

<div class="CConstant"><div class=CTopic><h3 class=CTitle><a name="(mosh_socket).SHUT_RDWR"></a>SHUT_RDWR</h3></div></div>

</div><!--Content-->


<div id=Footer>Copyright &copy; 2008 - 2010 Higepon&nbsp; &middot;&nbsp; Updated July 29th, 2010&nbsp; &middot;&nbsp; <a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MTitle>Mosh</div><div class=MEntry><div class=MFile><a href="../../doc/text/About-txt.html">About</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/Download-txt.html">Download</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Mosh</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile><a href="../../doc/text/Core-txt.html">Core</a></div></div><div class=MEntry><div class=MFile><a href="config-ss.html">Configuration</a></div></div><div class=MEntry><div class=MFile><a href="control-ss.html">Control</a></div></div><div class=MEntry><div class=MFile><a href="dbi-ss.html">Database independent interface</a></div></div><div class=MEntry><div class=MFile><a href="ffi-ss.html">Foreign Function Interface</a></div></div><div class=MEntry><div class=MFile><a href="pp-ss.html">Pretty Printing</a></div></div><div class=MEntry><div class=MFile><a href="process-ss.html">Process</a></div></div><div class=MEntry><div class=MFile id=MSelected>Socket</div></div><div class=MEntry><div class=MFile><a href="irc/client-ss.html">IRC Client</a></div></div><div class=MEntry><div class=MFile><a href="test-ss.html">Unit Testing</a></div></div><div class=MEntry><div class=MFile><a href="concurrent-ss.html">Concurrent</a></div></div><div class=MEntry><div class=MFile><a href="file-ss.html">File</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">Lib</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="../match-ss.html">Pattern Match</a></div></div><div class=MEntry><div class=MFile><a href="../rbtree-ss.html">Red-Black tree</a></div></div><div class=MEntry><div class=MFile><a href="../shorten-ss.html">Shorten</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/regexp-txt.html">Regular Expressions</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">R6RS</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="../../doc/text/Naming-txt.html">Naming Conventions</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/Compositelibrary-txt.html">Composite library</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/arith-tex-txt.html">Arithmetic</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/base-tex-txt.html">Base Library</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/bytevector-tex-txt.html">Bytevectors</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/programlib-tex-txt.html">Command-line access and exit values</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/iocond-tex-txt.html">Condition types</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/control-tex-txt.html">Control structures</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/enum-tex-txt.html">Enumerations</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/eval-tex-txt.html">eval</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/exc-tex-txt.html">Exceptions and conditions</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/files-tex-txt.html">File system</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/hashtable-tex-txt.html">Hashtables</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/list-tex-txt.html">List utilities</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/setcar-tex-txt.html">Mutable pairs</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/stringset-tex-txt.html">Mutable strings</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/portio-tex-txt.html">Port I/<wbr>O</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/r5rscompat-tex-txt.html">R5RS compatibility</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/records-tex-txt.html">Records</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/convio-tex-txt.html">Simple I/<wbr>O</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/sort-tex-txt.html">Sorting</a></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/syntax-case-tex-txt.html">syntax-case</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../../doc/text/srfi-txt.html">SRFIs</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">Index</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MIndex><a href="../../../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Constants.html">Constants</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Libraries.html">Libraries</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Variables.html">Variables</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Constants">Constants</option><option value="Functions">Functions</option><option value="Libraries">Libraries</option><option value="Variables">Variables</option></select></div><script language=JavaScript><!--
HideAllBut([1, 2], 5);// --></script></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>